read_csv("data/interim/holc_cities_buffer_1km_wells_all.csv")
# exposure data
holc_cities_buffer_1km_wells_all <-
read_csv("../../data/interim/holc_cities_buffer_1km_wells_all.csv")
holc_cities_buffer_3km_wells_all <-
read_csv("../../data/interim/holc_cities_buffer_3km_wells_all.csv")
# HOLC and wells data
holc_cities <-
st_read("../../data/raw/univ_richmond/mapping_inequality/shapefile/holc_ad_data.shp") %>%
as_tibble() %>%
mutate(city = as.factor(city)) %>%
group_by(city) %>%
summarize()
holc_neighborhoods <-
st_read("../../data/raw/univ_richmond/mapping_inequality/shapefile/holc_ad_data.shp") %>%
mutate(city = as.factor(city)) %>%
st_transform(crs_projected) %>%
st_buffer(dist = 0) %>%  # shortcut to address issue with dataset
st_transform(crs_nad83) %>%
mutate(neighborhood = as.character(neighborho)) %>%
distinct(neighborhood, .keep_all = TRUE) %>%
select(-neighborho)
wells_interim <- readRDS("../../data/interim/wells_interim.rds")
# exposure data
holc_cities_buffer_1km_wells_all <-
read_csv("../../data/interim/holc_cities_buffer_1km_wells_all.csv")
holc_cities_buffer_3km_wells_all <-
read_csv("../../data/interim/holc_cities_buffer_3km_wells_all.csv")
holc_neighborhoods_buffer_1km_wells_all <-
read_csv("../../data/interim/holc_neighborhoods_buffer_1km_wells_all.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_buffer_3km_wells_all <-
read_csv("../../data/interim/holc_neighborhoods_buffer_3km_wells_all.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_buffer_1km_wells_producing <-
read_csv("../../data/interim/holc_neighborhoods_buffer_1km_wells_producing.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_buffer_3km_wells_producing <-
read_csv("../../data/interim/holc_neighborhoods_buffer_3km_wells_producing.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_buffer_1km_prod_boe <-
read_csv("../../data/interim/holc_neighborhoods_buffer_1km_prod_boe.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_buffer_3km_prod_boe <-
read_csv("../../data/interim/holc_neighborhoods_buffer_3km_prod_boe.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_exp <- holc_neighborhoods %>%
as_tibble() %>%
mutate(neighhborhood = as.factor(neighborhood)) %>%
left_join(holc_neighborhoods_buffer_1km_wells_all, by = "neighborhood") %>%
mutate(buffer_1km_wells_all_n = replace_na(buffer_1km_wells_all_n, 0)) %>%
left_join(holc_neighborhoods_buffer_3km_wells_all, by = "neighborhood") %>%
mutate(buffer_3km_wells_all_n = replace_na(buffer_3km_wells_all_n, 0)) %>%
left_join(holc_neighborhoods_buffer_1km_wells_producing, by = "neighborhood") %>%
mutate(buffer_1km_wells_producing_n = replace_na(buffer_1km_wells_producing_n, 0)) %>%
left_join(holc_neighborhoods_buffer_3km_wells_producing, by = "neighborhood") %>%
mutate(buffer_3km_wells_producing_n = replace_na(buffer_3km_wells_producing_n, 0)) %>%
left_join(holc_neighborhoods_buffer_1km_prod_boe, by = "neighborhood") %>%
mutate(buffer_1km_production_boe = replace_na(buffer_1km_production_boe, 0)) %>%
left_join(holc_neighborhoods_buffer_3km_prod_boe, by = "neighborhood") %>%
mutate(buffer_3km_production_boe = replace_na(buffer_3km_production_boe, 0)) %>%
st_as_sf()
source("code/2-exposure_assessment/01-fxn_assess_exposure_buffer.R")
source("code/2-exposure_assessment/01-fxn_assess_exposure_buffer.R")
# data input
holc_cities_buffer_1km_wells_all <-
read_csv("data/interim/holc_cities_buffer_1km_wells_all.csv")
holc_cities_buffer_3km_wells_all <-
read_csv("data/interim/holc_cities_buffer_3km_wells_all.csv")
holc_neighborhoods <-
st_read("data/raw/univ_richmond/mapping_inequality/shapefile/holc_ad_data.shp") %>%
mutate(city = as.factor(city)) %>%
st_transform(crs_projected) %>%
st_buffer(dist = 0) %>%  # shortcut to address issue with dataset
st_transform(crs_nad83) %>%
mutate(neighborhood = as.character(neighborho)) %>%
distinct(neighborhood, .keep_all = TRUE)
wells_sf <- readRDS("data/interim/wells_interim.rds") %>%
drop_na("longitude") %>%
st_as_sf(coords = c("longitude", "latitude"), crs = crs_nad83)
# data prep
cities_near_wells_1km <- holc_cities_buffer_1km_wells_all %>%
filter(buffer_1km_wells_all_n >= 10)
neighborhoods_near_wells_1km <- holc_neighborhoods %>%
filter(city %in% cities_near_wells_1km$city) %>%
select(neighborhood) %>%
st_centroid()
cities_near_wells_3km <- holc_cities_buffer_3km_wells_all %>%
filter(buffer_3km_wells_all_n >= 10)
neighborhoods_near_wells_3km <- holc_neighborhoods %>%
filter(city %in% cities_near_wells_3km$city) %>%
select(neighborhood) %>%
st_centroid()
producing_wells <- wells_sf %>% filter(cumulative_boe > 0)
summary(as.factor(wells_sf$production_type))
wells_oil_gas   <- wells_sf %>% filter(production_type == "OIL" |
production_type == "GAS")
nrow(wells_oil_gas)
wells_producing <- wells_sf %>% filter(cumulative_boe > 0)
nrow(wells_producing)
# initiates tibble
holc_neighborhoods_buffer_1km_wells_oil_gas <-
tibble(neighborhood = "",
buffer_1km_wells_oil_gas_n = as.numeric(NA))
# loops through exposure assessment function
for(i in c(1:nrow(neighborhoods_near_wells_1km))) {
holc_neighborhoods_buffer_1km_wells_oil_gas[i, ] <-
assessExposureBufferCount(data_geography = neighborhoods_near_wells_1km[i, ],
data_wells     = wells_oil_gas,
buffer_dist_m  = 1000,
exp_variable   = "buffer_1km_wells_oil_gas_n")
print(i)
}
# exports dataset
write_csv(holc_neighborhoods_buffer_1km_wells_oil_gas,
"data/interim/holc_neighborhoods_buffer_1km_wells_oil_gas.csv")
#.........................................................................
# counts wells within 3 km of boundary of HOLC neighborhoods
# initiates tibble
holc_neighborhoods_buffer_3km_wells_oil_gas <-
tibble(neighborhood = "",
buffer_3km_wells_oil_gas_n = as.numeric(NA))
# loops through exposure assessment function
for(i in c(1:nrow(neighborhoods_near_wells_3km))) {
holc_neighborhoods_buffer_3km_wells_oil_gas[i, ] <-
assessExposureBufferCount(data_geography = neighborhoods_near_wells_3km[i, ],
data_wells     = wells_oil_gas,
buffer_dist_m  = 3000,
exp_variable   = "buffer_3km_wells_oil_gas_n")
print(i)
}
# exports dataset
write_csv(holc_neighborhoods_buffer_3km_wells_oil_gas,
"data/interim/holc_neighborhoods_buffer_3km_wells_oil_gas.csv")
View(holc_neighborhoods_buffer_1km_wells_oil_gas)
wells_oil_gas   <- wells_sf %>% filter(production_type == "OIL" |
production_type == "GAS" |
production_type == "OIL & GAS")
# initiates tibble
holc_neighborhoods_buffer_1km_wells_oil_gas <-
tibble(neighborhood = "",
buffer_1km_wells_oil_gas_n = as.numeric(NA))
# loops through exposure assessment function
for(i in c(1:nrow(neighborhoods_near_wells_1km))) {
holc_neighborhoods_buffer_1km_wells_oil_gas[i, ] <-
assessExposureBufferCount(data_geography = neighborhoods_near_wells_1km[i, ],
data_wells     = wells_oil_gas,
buffer_dist_m  = 1000,
exp_variable   = "buffer_1km_wells_oil_gas_n")
print(i)
}
# exports dataset
write_csv(holc_neighborhoods_buffer_1km_wells_oil_gas,
"data/interim/holc_neighborhoods_buffer_1km_wells_oil_gas.csv")
#.........................................................................
# counts wells within 3 km of boundary of HOLC neighborhoods
# initiates tibble
holc_neighborhoods_buffer_3km_wells_oil_gas <-
tibble(neighborhood = "",
buffer_3km_wells_oil_gas_n = as.numeric(NA))
# loops through exposure assessment function
for(i in c(1:nrow(neighborhoods_near_wells_3km))) {
holc_neighborhoods_buffer_3km_wells_oil_gas[i, ] <-
assessExposureBufferCount(data_geography = neighborhoods_near_wells_3km[i, ],
data_wells     = wells_oil_gas,
buffer_dist_m  = 3000,
exp_variable   = "buffer_3km_wells_oil_gas_n")
print(i)
}
# exports dataset
write_csv(holc_neighborhoods_buffer_3km_wells_oil_gas,
"data/interim/holc_neighborhoods_buffer_3km_wells_oil_gas.csv")
wells_injection <- wells_sf %>% filter(production_type == "INJECTION")
# initiates tibble
holc_neighborhoods_buffer_1km_wells_injection <-
tibble(neighborhood = "",
buffer_1km_wells_injection_n = as.numeric(NA))
# loops through exposure assessment function
for(i in c(1:nrow(neighborhoods_near_wells_1km))) {
holc_neighborhoods_buffer_1km_wells_injection[i, ] <-
assessExposureBufferCount(data_geography = neighborhoods_near_wells_1km[i, ],
data_wells     = wells_injection,
buffer_dist_m  = 1000,
exp_variable   = "buffer_1km_wells_injection_n")
print(i)
}
# exports dataset
write_csv(holc_neighborhoods_buffer_1km_wells_injection,
"data/interim/holc_neighborhoods_buffer_1km_wells_injection.csv")
#.........................................................................
# counts wells within 3 km of boundary of HOLC neighborhoods
# initiates tibble
holc_neighborhoods_buffer_3km_wells_injection <-
tibble(neighborhood = "",
buffer_3km_wells_injection_n = as.numeric(NA))
# loops through exposure assessment function
for(i in c(1:nrow(neighborhoods_near_wells_3km))) {
holc_neighborhoods_buffer_3km_wells_injection[i, ] <-
assessExposureBufferCount(data_geography = neighborhoods_near_wells_3km[i, ],
data_wells     = wells_injection,
buffer_dist_m  = 3000,
exp_variable   = "buffer_3km_wells_injection_n")
print(i)
}
# exports dataset
write_csv(holc_neighborhoods_buffer_3km_wells_injection,
"data/interim/holc_neighborhoods_buffer_3km_wells_injection.csv")
# first set up the environment; we need the `tidyverse` and `sf` packages
source("../../code/0-setup/01-setup.R")
# HOLC and wells data
holc_cities <-
st_read("../../data/raw/univ_richmond/mapping_inequality/shapefile/holc_ad_data.shp") %>%
as_tibble() %>%
mutate(city = as.factor(city)) %>%
group_by(city) %>%
summarize()
holc_neighborhoods <-
st_read("../../data/raw/univ_richmond/mapping_inequality/shapefile/holc_ad_data.shp") %>%
mutate(city = as.factor(city)) %>%
st_transform(crs_projected) %>%
st_buffer(dist = 0) %>%  # shortcut to address issue with dataset
st_transform(crs_nad83) %>%
mutate(neighborhood = as.character(neighborho)) %>%
distinct(neighborhood, .keep_all = TRUE) %>%
select(-neighborho)
wells_interim <- readRDS("../../data/interim/wells_interim.rds")
# exposure data
holc_cities_buffer_1km_wells_all <-
read_csv("../../data/interim/holc_cities_buffer_1km_wells_all.csv")
holc_cities_buffer_3km_wells_all <-
read_csv("../../data/interim/holc_cities_buffer_3km_wells_all.csv")
holc_neighborhoods_buffer_1km_wells_all <-
read_csv("../../data/interim/holc_neighborhoods_buffer_1km_wells_all.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_buffer_3km_wells_all <-
read_csv("../../data/interim/holc_neighborhoods_buffer_3km_wells_all.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_buffer_1km_wells_oil_gas <-
read_csv("../../data/interim/holc_neighborhoods_buffer_1km_wells_oil_gas.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_buffer_3km_wells_oil_gas <-
read_csv("../../data/interim/holc_neighborhoods_buffer_3km_wells_oil_gas.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_buffer_1km_wells_injection <-
read_csv("../../data/interim/holc_neighborhoods_buffer_1km_wells_injection.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_buffer_3km_wells_injection <-
read_csv("../../data/interim/holc_neighborhoods_buffer_3km_wells_injection.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_buffer_1km_wells_producing <-
read_csv("../../data/interim/holc_neighborhoods_buffer_1km_wells_producing.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_buffer_3km_wells_producing <-
read_csv("../../data/interim/holc_neighborhoods_buffer_3km_wells_producing.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_buffer_1km_prod_boe <-
read_csv("../../data/interim/holc_neighborhoods_buffer_1km_prod_boe.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_buffer_3km_prod_boe <-
read_csv("../../data/interim/holc_neighborhoods_buffer_3km_prod_boe.csv") %>%
mutate(neighborhood = as.factor(neighborhood))
holc_neighborhoods_exp <- holc_neighborhoods %>%
as_tibble() %>%
mutate(neighhborhood = as.factor(neighborhood)) %>%
left_join(holc_neighborhoods_buffer_1km_wells_all, by = "neighborhood") %>%
mutate(buffer_1km_wells_all_n = replace_na(buffer_1km_wells_all_n, 0)) %>%
left_join(holc_neighborhoods_buffer_3km_wells_all, by = "neighborhood") %>%
mutate(buffer_3km_wells_all_n = replace_na(buffer_3km_wells_all_n, 0)) %>%
left_join(holc_neighborhoods_buffer_1km_wells_oil_gas, by = "neighborhood") %>%
mutate(buffer_1km_wells_oil_gas_n = replace_na(buffer_1km_wells_oil_gas_n, 0)) %>%
left_join(holc_neighborhoods_buffer_3km_wells_oil_gas, by = "neighborhood") %>%
mutate(buffer_3km_wells_oil_gas_n = replace_na(buffer_3km_wells_oil_gas_n, 0)) %>%
left_join(holc_neighborhoods_buffer_1km_wells_injection, by = "neighborhood") %>%
mutate(buffer_1km_wells_injection_n = replace_na(buffer_1km_wells_injection_n, 0)) %>%
left_join(holc_neighborhoods_buffer_3km_wells_injection, by = "neighborhood") %>%
mutate(buffer_3km_wells_injection_n = replace_na(buffer_3km_wells_injection_n, 0)) %>%
left_join(holc_neighborhoods_buffer_1km_wells_producing, by = "neighborhood") %>%
mutate(buffer_1km_wells_producing_n = replace_na(buffer_1km_wells_producing_n, 0)) %>%
left_join(holc_neighborhoods_buffer_3km_wells_producing, by = "neighborhood") %>%
mutate(buffer_3km_wells_producing_n = replace_na(buffer_3km_wells_producing_n, 0)) %>%
left_join(holc_neighborhoods_buffer_1km_prod_boe, by = "neighborhood") %>%
mutate(buffer_1km_production_boe = replace_na(buffer_1km_production_boe, 0)) %>%
left_join(holc_neighborhoods_buffer_3km_prod_boe, by = "neighborhood") %>%
mutate(buffer_3km_production_boe = replace_na(buffer_3km_production_boe, 0)) %>%
st_as_sf()
holc_neighborhoods_exp %>%
ggplot() +
geom_histogram(aes(buffer_3km_wells_oil_gas_n), bins = 100) +
labs(x = "All wells within 3 km of neighborhood centroid (n)",
y = "Count") +
theme_classic()
holc_neighborhoods_exp %>%
ggplot() +
geom_histogram(aes(buffer_1km_wells_oil_gas_n), bins = 100) +
labs(x = "Oil and gas wells within 1 km of neighborhood centroid (n)",
y = "Count") +
theme_classic()
holc_neighborhoods_exp %>%
mutate(holc_grade = as.factor(holc_grade)) %>%
filter(holc_grade %in% c("A", "B", "C", "D")) %>%
ggplot() +
geom_bar(aes(holc_grade, buffer_1km_wells_oil_gas_n), stat = "identity") +
labs(x = "HOLC grade",
y = "All wells within 1 km of neighborhood centroid (n)") +
theme_classic()
holc_neighborhoods_exp %>%
filter(buffer_1km_wells_all_n > 0) %>%
mutate(holc_grade = as.factor(holc_grade)) %>%
filter(holc_grade %in% c("A", "B", "C", "D")) %>%
ggplot() +
geom_bar(aes(holc_grade, buffer_1km_wells_oil_gas_n), stat = "identity") +
labs(x = "HOLC grade",
y = "All wells within 1 km of neighborhood centroid (n)") +
facet_wrap(. ~ state) +
theme_classic()
holc_neighborhoods_exp %>%
ggplot() +
geom_histogram(aes(buffer_1km_wells_injection_n), bins = 100) +
labs(x = "Injection wells within 1 km of neighborhood centroid (n)",
y = "Count") +
theme_classic()
holc_neighborhoods_exp %>%
filter(buffer_1km_wells_injection_n > 0) %>%
ggplot() +
geom_histogram(aes(buffer_1km_wells_injection_n), bins = 100) +
labs(x = "Injection wells within 1 km of neighborhood centroid (n)",
y = "Count") +
theme_classic()
holc_neighborhoods_exp %>%
mutate(holc_grade = as.factor(holc_grade)) %>%
filter(holc_grade %in% c("A", "B", "C", "D")) %>%
ggplot() +
geom_bar(aes(holc_grade, buffer_1km_wells_oil_gas_n), stat = "identity") +
labs(x = "HOLC grade",
y = "All wells within 1 km of neighborhood centroid (n)") +
theme_classic()
holc_neighborhoods_exp %>%
mutate(holc_grade = as.factor(holc_grade)) %>%
filter(holc_grade %in% c("A", "B", "C", "D")) %>%
ggplot() +
geom_bar(aes(holc_grade, buffer_1km_wells_injection_n), stat = "identity") +
labs(x = "HOLC grade",
y = "All wells within 1 km of neighborhood centroid (n)") +
theme_classic()
holc_neighborhoods_exp %>%
filter(buffer_1km_wells_injection_n > 0) %>%
mutate(holc_grade = as.factor(holc_grade)) %>%
filter(holc_grade %in% c("A", "B", "C", "D")) %>%
ggplot() +
geom_bar(aes(holc_grade, buffer_1km_wells_injection_n), stat = "identity") +
labs(x = "HOLC grade",
y = "All wells within 1 km of neighborhood centroid (n)") +
facet_wrap(. ~ state) +
theme_classic()
# first set up the environment; we need the `tidyverse` and `sf` packages
source("../../code/0-setup/01-setup.R")
# HOLC and wells data
holc_cities <-
st_read("../../data/raw/univ_richmond/mapping_inequality/shapefile/holc_ad_data.shp") %>%
as_tibble() %>%
mutate(city = as.factor(city)) %>%
group_by(city) %>%
summarize()
# U.S. census tracts from 1940
tracts_1940 <- st_read("../../data/raw/ipums/nhgis0001_shapefile_tl2008_us_tract_1940/US_tract_1940_conflated.shp")
glimpse(tracts_1940)
# HOLC and wells data
holc_cities <-
st_read("../../data/raw/univ_richmond/mapping_inequality/shapefile/holc_ad_data.shp") %>%
as_tibble() %>%
mutate(city = as.factor(city)) %>%
group_by(city) %>%
summarize()
# U.S. census tracts from 1940
tracts_1940 <- st_read("../../data/raw/ipums/nhgis0001_shapefile_tl2008_us_tract_1940/US_tract_1940_conflated.shp")
tracts_holc_cities <- holc_cities %>% st_intersection(tracts_1940)
holc_cities
# data input
holc_cities_buffer_1km_wells_all <-
read_csv("data/interim/holc_cities_buffer_1km_wells_all.csv")
nrow(holc_cities_buffer_1km_wells_all)
glimpse(holc_cities_buffer_1km_wells_all)
# HOLC and wells data
holc_cities_exposed <-  # cities with exposure > 10 wells
read_csv("../../data/interim/holc_cities_buffer_1km_wells_all.csv")
glimpse(holc_cities_exposed)
# HOLC and wells data
holc_cities_exposed <-  # cities with exposure > 10 wells
read_csv("../../data/interim/holc_cities_buffer_1km_wells_all.csv") %>%
filter(buffer_1km_wells_all_n >= 10)
glimpse(holc_cities_exposed)
# HOLC and wells data
holc_cities_near_wells <-  # cities with exposure > 10 wells
read_csv("../../data/interim/holc_cities_buffer_1km_wells_all.csv") %>%
filter(buffer_1km_wells_all_n >= 10)
# HOLC neighborhoods near wells
holc_cities_exposed <-
st_read("../../data/raw/univ_richmond/mapping_inequality/shapefile/holc_ad_data.shp") %>%
as_tibble() %>%
mutate(city = as.factor(city)) %>%
filter(city %in% holc_cities_near_wells$city) %>%
group_by(city) %>%
summarize()
glimpse(holc_cities_exposed)
# HOLC neighborhoods near wells
holc_cities_exposed <-
st_read("../../data/raw/univ_richmond/mapping_inequality/shapefile/holc_ad_data.shp") %>%
as_tibble() %>%
mutate(city = as.factor(city)) %>%
filter(city %in% holc_cities_near_wells$city) %>%
group_by(city, .keep_all = TRUE) %>%
summarize()
glimpse(holc_cities_exposed)
# HOLC neighborhoods near wells
holc_cities_exposed <-
st_read("../../data/raw/univ_richmond/mapping_inequality/shapefile/holc_ad_data.shp") %>%
as_tibble() %>%
mutate(city = as.factor(city)) %>%
filter(city %in% holc_cities_near_wells$city) %>%
group_by(city) %>%
summarize(.keep_all = TRUE)
glimpse(holc_cities_exposed)
# HOLC neighborhoods near wells
holc_cities_exposed <-
st_read("../../data/raw/univ_richmond/mapping_inequality/shapefile/holc_ad_data.shp") %>%
#as_tibble() %>%
mutate(city = as.factor(city)) %>%
filter(city %in% holc_cities_near_wells$city) %>%
group_by(city) %>%
summarize()
# HOLC neighborhoods near wells
holc_cities_exposed <-
st_read("../../data/raw/univ_richmond/mapping_inequality/shapefile/holc_ad_data.shp") %>%
#as_tibble() %>%
st_transform(crs_projected) %>%
st_buffer(dist = 0) %>%  # shortcut to address issue with dataset
st_transform(crs_nad83) %>%
mutate(city = as.factor(city)) %>%
filter(city %in% holc_cities_near_wells$city) %>%
group_by(city) %>%
summarize()
glimpse(holc_cities_exposed)
nrow(holc_cities_exposed)
source("../../code/0-setup/01-setup.R")
source("../../code/0-setup/01-setup.R")
wells_interim <- readRDS("../../data/interim/wells_interim.rds")
calgem_prod_2018 <- read_csv("../../data/raw/cal_gem/calgem_production_monthly_2018.csv")
wells_interim    <- readRDS("../../data/interim/wells_interim.rds")
calgem_prod_2018 <-
read_csv("../../data/raw/cal_gem/calgem_production_monthly_2018.csv")
calgem_prod_2019 <-
read_csv("../../data/raw/cal_gem/calgem_production_monthly_2019.csv")
nrow(unique(wells_interim$api_number))
length(unique(wells_interim$api_number))
summary(as.factor(wells_interim$production_type))
wells_producing <- wells_interim %>%
filter(cumulative_boe > 0)
source("../../code/1-data_tidying/02-tidy_calgem_production_data.R")
calgem_production_monthly1819 <- tibble()
# loops through 2018-2019 and tidies the CalGEM production data
for (year in c(2018:2019)) {
calgem_production_monthly1819 <-
bind_rows(calgem_production_monthly1819,
tidyProductionData1819(
paste("../../data/raw/cal_gem/calgem_production_monthly_",
as.character(year),
".csv",
sep = "")
)
)
}
library("lubridate")
library("lubridate")
source("../../code/0-setup/01-setup.R")
source("../../code/1-data_tidying/02-tidy_calgem_production_data.R")
calgem_production_monthly1819 <- tibble()
# loops through 2018-2019 and tidies the CalGEM production data
for (year in c(2018:2019)) {
calgem_production_monthly1819 <-
bind_rows(calgem_production_monthly1819,
tidyProductionData1819(
paste("../../data/raw/cal_gem/calgem_production_monthly_",
as.character(year),
".csv",
sep = "")
)
)
}
glimpse(calgem_no_production)
glimpse(calgem_production_monthly1819)
calgem_no_production <- calgem_production_monthly1819 %>%
filter(total_oil_gas_produced == 0)
calgem_no_production <- calgem_production_monthly1819 %>%
filter(total_oil_gas_produced == 0) %>%
distinct(api_number)
wells_postprod <- wells_interim %>%
filter(api_number == calgem_no_production$api_number)
wells_postprod <- wells_interim %>%
filter(api_number == calgem_no_production$api_number)
wells_postprod <- wells_interim %>%
filter(api_number %in% calgem_no_production$api_number)
calgem_no_production <- calgem_production_monthly1819 %>%
filter(total_oil_gas_produced == 0) %>%
distinct(api_number)
wells_postprod <- wells_interim %>%
filter(api_number %in% calgem_no_production$api_number)
glimpse(calgem_no_production)
glimpse(wells_postprod)
glimpse(calgem_no)
glimpse(calgem_no_production)
glmpse(wells_interim$api_number)
glimpse(wells_interim$api_number)
