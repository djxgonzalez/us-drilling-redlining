"0","# spatial join"
"0","holc_neighborhoods_centroids <-"
"0","  st_read(""../../data/raw/univ_richmond/mapping_inequality/shapefile/holc_ad_data.shp"") %>%"
"0","  st_transform(crs_nad83) %>%"
"0","  st_centroid()"
"1","Reading layer `"
"1","holc_ad_data"
"1","' from data source `"
"1","/Users/davidgonzalez/Documents/Professional/research/projects active/us redlining drilling/us-drilling-redlining/data/raw/univ_richmond/mapping_inequality/shapefile/holc_ad_data.shp"
"1","' using driver `"
"1","ESRI Shapefile"
"1","'"
"1","
"
"1","Simple feature collection with 8878 features and 7 fields"
"1"," (with 3 geometries empty)"
"1","
"
"1","geometry type:  MULTIPOLYGON
"
"1","dimension:      XY
"
"1","bbox:           "
"1","xmin: -122.7675 ymin: 25.70537 xmax: -70.9492 ymax: 47.72251"
"1","
"
"1","CRS:            4326
"
"2","st_centroid assumes attributes are constant over geometries of x"
"2","st_centroid does not give correct centroids for longitude/latitude data"
"0","holc_neighborhoods_centroids <- holc_neighborhoods_centroids %>%"
"0","  mutate(X = st_coordinates(holc_neighborhoods_centroids)[, 1], "
"0","         Y = st_coordinates(holc_neighborhoods_centroids)[, 2]) %>%"
"0","  drop_na(X) %>%"
"0","  st_join(holc_census_1940) %>%"
"0","  rename(holc_grade = holc_grade.x) #%>%"
"2","although coordinates are longitude/latitude, st_intersects assumes that they are planar
"
"0","  #drop_na(pop40_w)"
