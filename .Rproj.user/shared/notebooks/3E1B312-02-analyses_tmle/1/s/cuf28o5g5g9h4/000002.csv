"0","# gets exposure variables to join with matched dataset -----------------------"
"0",""
"0","# adds list of covariates"
"0","covars_list <- c(""median_home_value"","
"0","                 ""prop_nonwhite"","
"0","                 ""prop_black"","
"0","                 ""prop_foreign"","
"0","                 ""prop_high_school"","
"0","                 ""prop_employed"","
"0","                 ""prop_no_radio"","
"0","                 ""prop_home_repair"","
"0","                 ""n_people_unit"","
"0","                 ""pop_density"")"
"0",""
"0","# 0 m buffer"
"0","vars_exposure_ab_0m <- holc_neighborhoods_exp %>%"
"0","  select(neighborhood, area_sqkm,"
"0","         wells_0km_all, wells_0km_all_preholc, wells_0km_all_postholc) %>%"
"0","  filter(neighborhood %in% holc_matched_ab_0m$neighborhood) %>%"
"0","  mutate(wells_0m_all                  = wells_0km_all,"
"0","         wells_0m_all_density          = (wells_0km_all / area_sqkm),"
"0","         wells_0m_all_preholc_density  = (wells_0km_all_preholc / area_sqkm),"
"0","         wells_0m_all_postholc_density = (wells_0km_all_postholc / area_sqkm))"
"0","vars_exposure_bc_0m <- holc_neighborhoods_exp %>%"
"0","  select(neighborhood, area_sqkm,"
"0","         wells_0km_all, wells_0km_all_preholc, wells_0km_all_postholc) %>%"
"0","  filter(neighborhood %in% holc_matched_bc_0m$neighborhood) %>%"
"0","  mutate(wells_0m_all                  = wells_0km_all,"
"0","         wells_0m_all_density          = (wells_0km_all / area_sqkm),"
"0","         wells_0m_all_preholc_density  = (wells_0km_all_preholc / area_sqkm),"
"0","         wells_0m_all_postholc_density = (wells_0km_all_postholc / area_sqkm))"
"0","vars_exposure_cd_0m <- holc_neighborhoods_exp %>%"
"0","  select(neighborhood, area_sqkm,"
"0","         wells_0km_all, wells_0km_all_preholc, wells_0km_all_postholc) %>%"
"0","  filter(neighborhood %in% holc_matched_cd_0m$neighborhood) %>%"
"0","  mutate(wells_0m_all                  = wells_0km_all,"
"0","         wells_0m_all_density          = (wells_0km_all / area_sqkm),"
"0","         wells_0m_all_preholc_density  = (wells_0km_all_preholc / area_sqkm),"
"0","         wells_0m_all_postholc_density = (wells_0km_all_postholc / area_sqkm))"
"0",""
"0","# 100 m buffer"
"0","vars_exposure_ab_100m <- holc_neighborhoods_exp %>%"
"0","  select(neighborhood, area_sqkm,"
"0","         wells_100m_all, wells_100m_all_preholc, wells_100m_all_postholc) %>%"
"0","  filter(neighborhood %in% holc_matched_ab_100m$neighborhood) %>%"
"0","  mutate(wells_100m_all_density          = (wells_100m_all / area_sqkm),"
"0","         wells_100m_all_preholc_density  = (wells_100m_all_preholc / area_sqkm),"
"0","         wells_100m_all_postholc_density = (wells_100m_all_postholc / area_sqkm))"
"0","vars_exposure_bc_100m <- holc_neighborhoods_exp %>%"
"0","  select(neighborhood, area_sqkm,"
"0","         wells_100m_all, wells_100m_all_preholc, wells_100m_all_postholc) %>%"
"0","  filter(neighborhood %in% holc_matched_bc_100m$neighborhood) %>%"
"0","  mutate(wells_100m_all_density          = (wells_100m_all / area_sqkm),"
"0","         wells_100m_all_preholc_density  = (wells_100m_all_preholc / area_sqkm),"
"0","         wells_100m_all_postholc_density = (wells_100m_all_postholc / area_sqkm))"
"0","vars_exposure_cd_100m <- holc_neighborhoods_exp %>%"
"0","  select(neighborhood, area_sqkm,"
"0","         wells_100m_all, wells_100m_all_preholc, wells_100m_all_postholc) %>%"
"0","  filter(neighborhood %in% holc_matched_cd_100m$neighborhood) %>%"
"0","  mutate(wells_100m_all_density          = (wells_100m_all / area_sqkm),"
"0","         wells_100m_all_preholc_density  = (wells_100m_all_preholc / area_sqkm),"
"0","         wells_100m_all_postholc_density = (wells_100m_all_postholc / area_sqkm))"
"0",""
"0","# joins covariates and adds treatment indicator ------------------------------"
"0",""
"0","# 0k m"
"0","holc_matched_ab_0m <- holc_matched_ab_0m %>%"
"0","  left_join(vars_exposure_ab_0m, by = ""neighborhood"") %>%"
"0","  mutate(treatment = case_when(holc_grade == ""B"" ~ 1,"
"0","                               holc_grade == ""A"" ~ 0))"
"0","holc_matched_bc_0m <- holc_matched_bc_0m %>%"
"0","  left_join(vars_exposure_bc_0m, by = ""neighborhood"") %>%"
"0","  mutate(treatment = case_when(holc_grade == ""C"" ~ 1,"
"0","                               holc_grade == ""B"" ~ 0))"
"0","holc_matched_cd_0m <- holc_matched_cd_0m %>%"
"0","  left_join(vars_exposure_cd_0m, by = ""neighborhood"") %>%"
"0","  mutate(treatment = case_when(holc_grade == ""D"" ~ 1,"
"0","                               holc_grade == ""C"" ~ 0))"
"0",""
"0","# 100 m"
"0","holc_matched_ab_100m <- holc_matched_ab_100m %>%"
"0","  left_join(vars_exposure_ab_100m, by = ""neighborhood"") %>%"
"0","  mutate(treatment = case_when(holc_grade == ""B"" ~ 1,"
"0","                               holc_grade == ""A"" ~ 0))"
"0","holc_matched_bc_100m <- holc_matched_bc_100m %>%"
"0","  left_join(vars_exposure_bc_100m, by = ""neighborhood"") %>%"
"0","  mutate(treatment = case_when(holc_grade == ""C"" ~ 1,"
"0","                               holc_grade == ""B"" ~ 0))"
"0","holc_matched_cd_100m <- holc_matched_cd_100m %>%"
"0","  left_join(vars_exposure_cd_100m, by = ""neighborhood"") %>%"
"0","  mutate(treatment = case_when(holc_grade == ""D"" ~ 1,"
"0","                               holc_grade == ""C"" ~ 0))"
"0",""
"0","# 1 km"
"0","# holc_matched_ab_1km <- holc_matched_ab_1km %>%"
"0","#   left_join(vars_exposure_ab_1km, by = ""neighborhood"") %>%"
"0","#   mutate(treatment = case_when(holc_grade == ""B"" ~ 1,"
"0","#                                holc_grade == ""A"" ~ 0))"
"0","# holc_matched_bc_1km <- holc_matched_bc_1km %>%"
"0","#   left_join(vars_exposure_bc_1km, by = ""neighborhood"") %>%"
"0","#   mutate(treatment = case_when(holc_grade == ""C"" ~ 1,"
"0","#                                holc_grade == ""B"" ~ 0))"
"0","# holc_matched_cd_1km <- holc_matched_cd_1km %>%"
"0","#   left_join(vars_exposure_cd_1km, by = ""neighborhood"") %>%"
"0","#   mutate(treatment = case_when(holc_grade == ""D"" ~ 1,"
"0","#                                holc_grade == ""C"" ~ 0))"
